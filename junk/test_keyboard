#!/bin/bash

# Script to test Mac keyboard functionality
# Run this in the desktop terminal to verify keyboard is working

echo "Testing Mac keyboard functionality..."
echo ""

# Check current keyboard layout
echo "Current keyboard layout:"
setxkbmap -query
echo ""

# Test keyboard input
echo "Keyboard test:"
echo "1. Press any key to test basic input"
echo "2. Test special keys:"
echo "   - Command key (should work as Super/Windows key)"
echo "   - Option key (should work as Alt key)"
echo "   - Function keys (F1-F12)"
echo ""

# Interactive test
echo "Press Enter to continue with interactive test, or Ctrl+C to exit..."
read -r

echo "Starting interactive keyboard test..."
echo "Type some text to test keyboard input:"
read -r test_input

if [ -n "$test_input" ]; then
    echo "✓ Keyboard input working! You typed: '$test_input'"
else
    echo "✗ No input detected. Keyboard may not be working properly."
fi

echo ""
echo "If keyboard is not working, try:"
echo "  setxkbmap -layout us -variant mac -option altwin:swap_lalt_lwin"
echo "  sudo systemctl restart xrdp"
echo "  Log out and log back in"
